<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schraubenberechnung nach EC3</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
    <style>
        .container { max-width: 800px; margin: 20px auto; }
        .card { padding: 20px; }
        .result-row { margin: 10px 0; }
        .valid { color: green; }
        .invalid { color: red; }
        .results { margin-top: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h4>Schraubenberechnung nach EC3</h4>
            
            <div class="row">
                <div class="input-field col s12">
                    <select id="screwSize">
                        <option value="M12">M12</option>
                        <option value="M16">M16</option>
                        <option value="M20" selected>M20</option>
                        <option value="M24">M24</option>
                        <option value="M30">M30</option>
                    </select>
                    <label>Schraubengröße</label>
                </div>
            </div>

            <div class="row">
                <div class="input-field col s6">
                    <input id="tensionForce" type="number" step="0.1">
                    <label for="tensionForce">Zugkraft F_t,Ed [kN]</label>
                </div>
                <div class="input-field col s6">
                    <input id="shearForce" type="number" step="0.1">
                    <label for="shearForce">Scherkraft F_v,Ed [kN]</label>
                </div>
            </div>

            <button class="btn waves-effect waves-light" onclick="calculate()">
                Berechnen
            </button>

            <div id="results" class="results" style="display: none;">
                <h5>Ergebnisse</h5>
                <div id="resultsContent"></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        // Schraubendaten
        const screwData = {
            'M12': { As: 84.3, A: 113.1 },
            'M16': { As: 157, A: 201.1 },
            'M20': { As: 245, A: 314.2 },
            'M24': { As: 353, A: 452.4 },
            'M30': { As: 561, A: 706.9 }
        };

        // Materialkonstanten
        const fub = 800; // N/mm² für 8.8 Schrauben
        const gammaM2 = 1.25;

        // Initialize Materialize components
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('select');
            M.FormSelect.init(elems);
        });

        function calculate() {
            const selectedScrew = document.getElementById('screwSize').value;
            const tensionForce = parseFloat(document.getElementById('tensionForce').value) || 0;
            const shearForce = parseFloat(document.getElementById('shearForce').value) || 0;

            const screw = screwData[selectedScrew];
            
            // Grenzwerte berechnen
            const FtRd = (0.9 * fub * screw.As) / gammaM2;
            const FvRd = (0.6 * fub * screw.A) / gammaM2;
            
            // Ausnutzungsgrade
            const tensionUtilization = tensionForce / FtRd;
            const shearUtilization = shearForce / FvRd;
            const combinedUtilization = (shearForce / FvRd) + (tensionForce / (1.4 * FtRd));

            // Ergebnisse anzeigen
            const resultsDiv = document.getElementById('results');
            const resultsContent = document.getElementById('resultsContent');
            
            resultsDiv.style.display = 'block';
            resultsContent.innerHTML = `
                <div class="result-row">Zug-Grenztragfähigkeit F_t,Rd: ${FtRd.toFixed(2)} kN</div>
                <div class="result-row">Scher-Grenztragfähigkeit F_v,Rd: ${FvRd.toFixed(2)} kN</div>
                <div class="result-row">Ausnutzung Zug: ${(tensionUtilization * 100).toFixed(1)}%</div>
                <div class="result-row">Ausnutzung Schub: ${(shearUtilization * 100).toFixed(1)}%</div>
                <div class="result-row">Kombinierte Ausnutzung: ${(combinedUtilization * 100).toFixed(1)}%</div>
                <div class="result-row ${combinedUtilization <= 1.0 ? 'valid' : 'invalid'}">
                    <strong>${combinedUtilization <= 1.0 ? 'Nachweis erfüllt' : 'Nachweis nicht erfüllt'}</strong>
                </div>
            `;
        }
    </script>
</body>
</html>
