<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VDI 2230 Schraubenberechnung</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_HTML"></script>
    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true
    }
});
</script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input, select {
            width: 200px;
            padding: 5px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        button:hover {
            background-color: #45a049;
        }
        .results {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            margin-bottom: 20px;
        }
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            color: black;
            margin: 0;
        }
        .tab button:hover {
            background-color: #ddd;
        }
        .tab button.active {
            background-color: #4CAF50;
            color: white;
        }
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }
        .formula-box {
            background-color: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border: 1px solid #e9ecef;
        }
        .progress-bar {
            width: 100%;
            background-color: #f0f0f0;
            border-radius: 4px;
            margin-top: 5px;
        }
        .progress {
            height: 20px;
            background-color: #4CAF50;
            border-radius: 4px;
            transition: width 0.5s ease-in-out;
        }
        .progress.warning {
            background-color: #ff9800;
        }
        .progress.danger {
            background-color: #f44336;
        }
    </style>
</head>
<body>
    <h1>VDI 2230 Schraubenberechnung</h1>
    
    <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'Eingabe')">Eingabe</button>
        <button class="tablinks" onclick="openTab(event, 'Details')">Details</button>
    </div>

    <div id="Eingabe" class="tabcontent" style="display: block;">
        <div class="input-group">
            <label for="gewinde">Gewinde:</label>
            <select id="gewinde">
                <option value="M3">M3</option>
                <option value="M4">M4</option>
                <option value="M5">M5</option>
                <option value="M6">M6</option>
                <option value="M8">M8</option>
                <option value="M10" selected>M10</option>
                <option value="M12">M12</option>
                <option value="M14">M14</option>
                <option value="M16">M16</option>
                <option value="M20">M20</option>
                <option value="M24">M24</option>
                <option value="M30">M30</option>
                <option value="M36">M36</option>
            </select>
        </div>

        <div class="input-group">
            <label for="festigkeitsklasse">Festigkeitsklasse Schraube:</label>
            <select id="festigkeitsklasse">
                <option value="8.8">8.8</option>
                <option value="10.9">10.9</option>
                <option value="12.9">12.9</option>
            </select>
        </div>

        <div class="input-group">
            <label for="innengewinde_material">Material Innengewinde:</label>
            <select id="innengewinde_material">
                <option value="custom">Benutzerdefiniert</option>
                <option value="steel">Stahl (Rm = 400 N/mm²)</option>
                <option value="alu">Aluminium (Rm = 200 N/mm²)</option>
            </select>
        </div>

        <div class="input-group" id="custom_strength_group">
            <label for="custom_strength">Zugfestigkeit Innengewinde Rm [N/mm²]:</label>
            <input type="number" id="custom_strength" step="1" value="400">
        </div>

        <div class="input-group">
            <label for="FA">Axiale Betriebskraft FA [kN]:</label>
            <input type="number" id="FA" step="0.1" value="10">
        </div>

        <div class="input-group">
            <label for="kA">Klemmkraftfaktor kA:</label>
            <input type="number" id="kA" step="0.1" value="1.5">
        </div>
        
        <div class="input-group">
            <label for="mtat">Tatsächliche Einschraubtiefe [mm]:</label>
            <input type="number" id="mtat" step="0.1" value="10">
        </div>
        
        <button onclick="berechnen()">Berechnen</button>

        <div class="results" id="results">
            <h2>Ergebnisse</h2>
            <div id="resultContent"></div>
        </div>
    </div>

    <div id="Details" class="tabcontent">
        <h2>Berechnungsdetails</h2>
        <div id="detailContent"></div>
    </div>

    <script>
        // Gewindedaten
        const gewindeParams = {
            'M3': { d: 3, P: 0.5, d2: 2.675, d3: 2.387 },
            'M4': { d: 4, P: 0.7, d2: 3.545, d3: 3.141 },
            'M5': { d: 5, P: 0.8, d2: 4.480, d3: 4.019 },
            'M6': { d: 6, P: 1.0, d2: 5.350, d3: 4.773 },
            'M8': { d: 8, P: 1.25, d2: 7.188, d3: 6.466 },
            'M10': { d: 10, P: 1.5, d2: 9.026, d3: 8.160 },
            'M12': { d: 12, P: 1.75, d2: 10.863, d3: 9.853 },
            'M14': { d: 14, P: 2.0, d2: 12.701, d3: 11.546 },
            'M16': { d: 16, P: 2.0, d2: 14.701, d3: 13.546 },
            'M20': { d: 20, P: 2.5, d2: 18.376, d3: 16.933 },
            'M24': { d: 24, P: 3.0, d2: 22.051, d3: 20.319 },
            'M30': { d: 30, P: 3.5, d2: 27.727, d3: 25.706 },
            'M36': { d: 36, P: 4.0, d2: 33.402, d3: 31.093 }
        };

        // Event Listener für Material-Auswahl
        document.getElementById('innengewinde_material').addEventListener('change', function() {
            const customGroup = document.getElementById('custom_strength_group');
            const customInput = document.getElementById('custom_strength');
            
            if (this.value === 'custom') {
                customGroup.style.display = 'block';
            } else {
                customGroup.style.display = 'none';
                if (this.value === 'steel') {
                    customInput.value = 400;
                } else if (this.value === 'alu') {
                    customInput.value = 200;
                }
            }
        });

        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
            if (tabName === "Details") {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            }
        }

        function berechnen() {
    // Eingabewerte auslesen
    const gewindeTyp = document.getElementById('gewinde').value;
    const gewinde = gewindeParams[gewindeTyp];
    const festigkeitsklasse = document.getElementById('festigkeitsklasse').value;
    const FA = parseFloat(document.getElementById('FA').value) * 1000; // Umrechnung in N
    const kA = parseFloat(document.getElementById('kA').value);
    const Rm_innengewinde = parseFloat(document.getElementById('custom_strength').value);
    const m_tat = parseFloat(document.getElementById('mtat').value);

    // Materialkennwerte Schraube
    const festigkeitswerte = {
        '8.8': { Rp02: 640, Rm: 800 },
        '10.9': { Rp02: 900, Rm: 1000 },
        '12.9': { Rp02: 1080, Rm: 1200 }
    };
    const material = festigkeitswerte[festigkeitsklasse];

    // Berechnungen Schraube
    const AS = Math.PI * Math.pow(gewinde.d3, 2) / 4;
    const FM_erf = FA * kA;
    const sigma_zul = 0.9 * material.Rp02;  // Korrigiert nach VDI 2230
    const FMzul_schraube = sigma_zul * AS;

    // Berechnung Innengewinde
    const d1 = gewinde.d - 1.0825 * gewinde.P; // Kerndurchmesser Innengewinde
    
    // Berechnung der minimalen Einschraubtiefe nach VDI 2230
    const mef_min = FM_erf / (0.4 * Rm_innengewinde * Math.PI * d1);
    
    // Tatsächliche Einschraubtiefe berücksichtigen
    const m_eff = Math.min(m_tat, gewinde.P * 0.5);
    const A_innengewinde = Math.PI * m_eff * d1;
    const FMzul_innengewinde = 0.4 * Rm_innengewinde * A_innengewinde;

    // Bestimmung der maßgebenden zulässigen Kraft
    const FMzul = Math.min(FMzul_schraube, FMzul_innengewinde);
    const auslastung = (FM_erf / FMzul) * 100;

    // Ergebnisse ausgeben
    const resultContent = document.getElementById('resultContent');
    resultContent.innerHTML = `
        <p>Spannungsquerschnitt AS: ${AS.toFixed(2)} mm²</p>
        <p>Erforderliche Mindestklemmkraft FM,erf: ${(FM_erf/1000).toFixed(2)} kN</p>
        <p>Minimale Einschraubtiefe mef,min: ${mef_min.toFixed(2)} mm</p>
        <p>Tatsächliche Einschraubtiefe m_tat: ${m_tat.toFixed(2)} mm</p>
        <p style="color: ${m_tat < mef_min ? 'red' : 'green'}">
            ${m_tat < mef_min ? 'WARNUNG: Tatsächliche Einschraubtiefe zu gering!' : 'Einschraubtiefe ausreichend'}
        </p>
        <p>Zulässige Vorspannkraft Schraube: ${(FMzul_schraube/1000).toFixed(2)} kN</p>
        <p>Zulässige Vorspannkraft Innengewinde: ${(FMzul_innengewinde/1000).toFixed(2)} kN</p>
        <p>Maßgebende zulässige Vorspannkraft FM,zul: ${(FMzul/1000).toFixed(2)} kN</p>
        <p>Auslastung: ${auslastung.toFixed(1)}%</p>
        <div class="progress-bar">
            <div class="progress ${auslastung > 90 ? 'danger' : auslastung > 75 ? 'warning' : ''}" 
                 style="width: ${Math.min(auslastung, 100)}%">
            </div>
        </div>
    `;

    // Detailierte Berechnungen
    const detailContent = document.getElementById('detailContent');
    detailContent.innerHTML = `
        <div class="formula-box">
            <h3>Spannungsquerschnitt</h3>
            <p>Formel: \\[A_S = \\frac{\\pi}{4} \\cdot d_3^2\\]</p>
            <p>Eingesetzt: \\[A_S = \\frac{\\pi}{4} \\cdot ${gewinde.d3}^2\\]</p>
            <p>Ergebnis: \\[A_S = ${AS.toFixed(2)} \\text{ mm}^2\\]</p>
        </div>

        <div class="formula-box">
            <h3>Erforderliche Mindestklemmkraft</h3>
            <p>Formel: \\[F_{M,erf} = F_A \\cdot k_A\\]</p>
            <p>Eingesetzt: \\[F_{M,erf} = ${FA} \\cdot ${kA}\\]</p>
            <p>Ergebnis: \\[F_{M,erf} = ${FM_erf.toFixed(2)} \\text{ N} = ${(FM_erf/1000).toFixed(2)} \\text{ kN}\\]</p>
        </div>

        <div class="formula-box">
            <h3>Zulässige Spannung Schraube</h3>
            <p>Formel: \\[\\sigma_{zul} = 0,9 \\cdot R_{p0,2}\\]</p>
            <p>Eingesetzt: \\[\\sigma_{zul} = 0,9 \\cdot ${material.Rp02}\\]</p>
            <p>Ergebnis: \\[\\sigma_{zul} = ${sigma_zul.toFixed(2)} \\text{ N/mm}^2\\]</p>
        </div>

        <div class="formula-box">
            <h3>Minimale Einschraubtiefe</h3>
            <p>Formel: \\[m_{ef,min} = \\frac{F_{M,erf}}{0,4 \\cdot R_m \\cdot \\pi \\cdot d_1}\\]</p>
            <p>Eingesetzt: \\[m_{ef,min} = \\frac{${FM_erf.toFixed(2)}}{0,4 \\cdot ${Rm_innengewinde} \\cdot \\pi \\cdot ${d1.toFixed(3)}}\\]</p>
            <p>Ergebnis: \\[m_{ef,min} = ${mef_min.toFixed(2)} \\text{ mm}\\]</p>
        </div>

        <div class="formula-box">
            <h3>Zulässige Montagevorspannkraft Schraube</h3>
            <p>Formel: \\[F_{M,zul,S} = \\sigma_{zul} \\cdot A_S\\]</p>
            <p>Eingesetzt: \\[F_{M,zul,S} = ${sigma_zul.toFixed(2)} \\cdot ${AS.toFixed(2)}\\]</p>
            <p>Ergebnis: \\[F_{M,zul,S} = ${FMzul_schraube.toFixed(2)} \\text{ N} = ${(FMzul_schraube/1000).toFixed(2)} \\text{ kN}\\]</p>
        </div>

        <div class="formula-box">
            <h3>Tragfähigkeit Innengewinde</h3>
            <p>Formeln:</p>
            <p>\\[m_{eff} = \\min(m_{tat}, 0,5 \\cdot P)\\]</p>
            <p>\\[d_1 = d - 1,0825 \\cdot P\\]</p>
            <p>\\[A_{Innengewinde} = \\pi \\cdot m_{eff} \\cdot d_1\\]</p>
            <p>\\[F_{M,zul,I} = 0,4 \\cdot R_m \\cdot A_{Innengewinde}\\]</p>
            <p>Eingesetzt:</p>
            <p>\\[m_{eff} = ${m_eff.toFixed(3)} \\text{ mm}\\]</p>
            <p>\\[d_1 = ${gewinde.d} - 1,0825 \\cdot ${gewinde.P} = ${d1.toFixed(3)} \\text{ mm}\\]</p>
            <p>\\[A_{Innengewinde} = \\pi \\cdot ${m_eff.toFixed(3)} \\cdot ${d1.toFixed(3)} = ${A_innengewinde.toFixed(2)} \\text{ mm}^2\\]</p>
            <p>\\[F_{M,zul,I} = 0,4 \\cdot ${Rm_innengewinde} \\cdot ${A_innengewinde.toFixed(2)} = ${FMzul_innengewinde.toFixed(2)} \\text{ N} = ${(FMzul_innengewinde/1000).toFixed(2)} \\text{ kN}\\]</p>
        </div>

        <div class="formula-box">
            <h3>Maßgebende zulässige Vorspannkraft</h3>
            <p>\\[F_{M,zul} = \\min(F_{M,zul,S}, F_{M,zul,I}) = ${FMzul.toFixed(2)} \\text{ N} = ${(FMzul/1000).toFixed(2)} \\text{ kN}\\]</p>
        </div>

        <div class="formula-box">
            <h3>Auslastung</h3>
            <p>Formel: \\[\\text{Auslastung} = \\frac{F_{M,erf}}{F_{M,zul}} \\cdot 100\\%\\]</p>
            <p>Eingesetzt: \\[\\text{Auslastung} = \\frac{${FM_erf.toFixed(2)}}{${FMzul.toFixed(2)}} \\cdot 100\\%\\]</p>
            <p>Ergebnis: \\[\\text{Auslastung} = ${auslastung.toFixed(1)}\\%\\]</p>
        </div>
    `;

    MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
}
        window.addEventListener('load', function() {
            berechnen();
        });
    </script>
</body>
</html>
